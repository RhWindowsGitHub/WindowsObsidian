```ad-summary
title:æ¦‚è¿°
è®°å½•å…³äº Docker çš„èƒŒæ™¯ä»¥åŠå…¶å®‰è£…
```

# ä¸€ã€Docker ä»‹ç»

```ad-tip
title:INFO
ä½œè€…: Cola  

æ—¶é—´: 2022/12/17 18:16 PM
```

```ad-todo
title:Featuresï¼š ğŸ”
 - [ ] Docker æ¦‚è¿°
 - [ ] Docker  å®‰è£…
 - [ ] å¸¸ç”¨å‘½ä»¤ä»‹ç»
```

## 1.1 Docker æ˜¯ä»€ä¹ˆ

> æ­£å¦‚ [Docker å®˜ç½‘](https://www.docker.com/) ä¸­å†™ç€ Docker çš„å®£ä¼ è¯­ ==**Develop faster.** Run anywhere.== æ‰€æè¿°çš„ï¼Œä½¿ç”¨ Docker æˆ‘ä»¬å¯ä»¥æ›´å¿«çš„è¿›è¡Œå¼€å‘ï¼Œå¹¶éšå¤„è¿è¡Œã€‚ä¸”æˆªè‡³ 2022 Docker åœ¨ `Stack Overflow` ä¸­å¤‡å—å¥½è¯„ã€ŒThe most-loved Tool in Stack Overflowâ€™s 2022 Developer Surveyã€ã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416081218.png)

### 1.1.1 Docker å‡ºç°çš„èƒŒæ™¯

 å‡å®šæ‚¨åœ¨å¼€å‘ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œæ‚¨ä½¿ç”¨çš„æ˜¯ä¸€å°ç¬”è®°æœ¬ç”µè„‘è€Œä¸”æ‚¨çš„å¼€å‘ç¯å¢ƒå…·æœ‰ç‰¹å®šçš„é…ç½®ã€‚

 - å…¶ä»–å¼€å‘äººå‘˜èº«å¤„çš„ç¯å¢ƒé…ç½®ä¹Ÿå„æœ‰ä¸åŒã€‚æ‚¨æ­£åœ¨å¼€å‘çš„åº”ç”¨ä¾èµ–äºæ‚¨å½“å‰çš„é…ç½®ä¸”è¿˜è¦ä¾èµ–äºæŸäº›é…ç½®æ–‡ä»¶ã€‚
 - æ­¤å¤–ï¼Œæ‚¨çš„ä¼ä¸šè¿˜æ‹¥æœ‰æ ‡å‡†åŒ–çš„æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒï¼Œä¸”å…·æœ‰è‡ªèº«çš„é…ç½®å’Œä¸€ç³»åˆ—æ”¯æŒæ–‡ä»¶ã€‚

 æ‚¨å¸Œæœ›å°½å¯èƒ½å¤šåœ¨æœ¬åœ°æ¨¡æ‹Ÿè¿™äº›ç¯å¢ƒè€Œä¸äº§ç”Ÿé‡æ–°åˆ›å»ºæœåŠ¡å™¨ç¯å¢ƒçš„å¼€é”€ã€‚è¯·é—®ï¼Ÿæ‚¨è¦å¦‚ä½•ç¡®ä¿åº”ç”¨èƒ½å¤Ÿåœ¨è¿™äº›ç¯å¢ƒä¸­è¿è¡Œå’Œé€šè¿‡è´¨é‡æ£€æµ‹ï¼Ÿå¹¶ä¸”åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ä¸å‡ºç°ä»¤äººå¤´ç–¼çš„ç‰ˆæœ¬ã€é…ç½®é—®é¢˜ï¼Œä¹Ÿæ— éœ€é‡æ–°ç¼–å†™ä»£ç å’Œè¿›è¡Œæ•…éšœä¿®å¤ï¼Ÿ
 
---
ç­”æ¡ˆå°±æ˜¯ä½¿ç”¨å®¹å™¨ã€‚Dockerä¹‹æ‰€ä»¥å‘å±•å¦‚æ­¤è¿…é€Ÿï¼Œä¹Ÿæ˜¯å› ä¸ºå®ƒå¯¹æ­¤ç»™å‡ºäº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆï¼š==ç³»ç»Ÿå¹³æ»‘ç§»æ¤ï¼Œå®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯==ã€‚ ä»¥å‰æˆ‘ä»¬åœ¨è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œç¯å¢ƒé…ç½®ç›¸å½“éº»çƒ¦ï¼Œæ¢ä¸€å°æœºå™¨ï¼Œå°±è¦é‡æ¥ä¸€æ¬¡ï¼Œè´¹åŠ›è´¹æ—¶ã€‚å¾ˆå¤šäººæƒ³åˆ°ï¼Œèƒ½ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œè½¯ä»¶å¯ä»¥å¸¦ç¯å¢ƒå®‰è£…ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå®‰è£…çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥ã€‚==å¼€å‘äººå‘˜åˆ©ç”¨ Docker å¯ä»¥æ¶ˆé™¤åä½œç¼–ç æ—¶â€œåœ¨æˆ‘çš„æœºå™¨ä¸Šå¯æ­£å¸¸å·¥ä½œâ€çš„é—®é¢˜==ã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416081802.png)


 ä¹‹å‰åœ¨æœåŠ¡å™¨é…ç½®ä¸€ä¸ªåº”ç”¨çš„è¿è¡Œç¯å¢ƒï¼Œè¦å®‰è£…å„ç§è½¯ä»¶ï¼Œå®‰è£…å’Œé…ç½®è¿™äº›ä¸œè¥¿æœ‰å¤šéº»çƒ¦å°±ä¸è¯´äº†ï¼Œå®ƒè¿˜ä¸èƒ½è·¨å¹³å°ã€‚å‡å¦‚æˆ‘ä»¬æ˜¯åœ¨ Windows ä¸Šå®‰è£…çš„è¿™äº›ç¯å¢ƒï¼Œåˆ°äº† Linux åˆå¾—é‡æ–°è£…ã€‚å†µä¸”å°±ç®—ä¸è·¨æ“ä½œç³»ç»Ÿï¼Œæ¢å¦ä¸€å°åŒæ ·æ“ä½œç³»ç»Ÿçš„æœåŠ¡å™¨ï¼Œè¦**ç§»æ¤**åº”ç”¨ä¹Ÿæ˜¯éå¸¸éº»çƒ¦çš„ã€‚
 
ä¼ ç»Ÿä¸Šè®¤ä¸º:
 - è½¯ä»¶ç¼–ç å¼€å‘/æµ‹è¯•ç»“æŸåï¼Œæ‰€äº§å‡ºçš„æˆæœå³æ˜¯ç¨‹åºæˆ–æ˜¯èƒ½å¤Ÿç¼–è¯‘æ‰§è¡Œçš„äºŒè¿›åˆ¶å­—èŠ‚ç ç­‰(Java ä¸ºä¾‹)ã€‚
 - è€Œä¸ºäº†è®©è¿™äº›ç¨‹åºå¯ä»¥é¡ºåˆ©æ‰§è¡Œï¼Œå¼€å‘å›¢é˜Ÿä¹Ÿå¾—å‡†å¤‡å®Œæ•´çš„éƒ¨ç½²æ–‡ä»¶ï¼Œè®©ç»´è¿å›¢é˜Ÿå¾—ä»¥éƒ¨ç½²åº”ç”¨ç¨‹å¼ï¼Œå¼€å‘éœ€è¦æ¸…æ¥šçš„å‘Šè¯‰è¿ç»´éƒ¨ç½²å›¢é˜Ÿï¼Œç”¨çš„å…¨éƒ¨é…ç½®æ–‡ä»¶ + æ‰€æœ‰è½¯ä»¶ç¯å¢ƒã€‚
 - ä¸è¿‡ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œä»ç„¶å¸¸å¸¸å‘ç”Ÿéƒ¨ç½²å¤±è´¥çš„çŠ¶å†µã€‚Docker çš„å‡ºç°ä½¿å¾— Docker å¾—ä»¥æ‰“ç ´è¿‡å»==ã€Œç¨‹åºå³åº”ç”¨ã€==çš„è§‚å¿µã€‚é€è¿‡é•œåƒ (images) å°†ä½œä¸šç³»ç»Ÿæ ¸å¿ƒé™¤å¤–ï¼Œè¿ä½œåº”ç”¨ç¨‹å¼æ‰€éœ€è¦çš„ç³»ç»Ÿç¯å¢ƒï¼Œç”±ä¸‹è€Œä¸Šæ‰“åŒ…ï¼Œè¾¾åˆ°åº”ç”¨ç¨‹å¼è·¨å¹³å°é—´çš„æ— ç¼æ¥è½¨è¿ä½œã€‚

### 1.1.2 Docker Docker çš„ç†å¿µ

> Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚
>
> Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯==ã€Buildï¼ŒShip and Run Any App,Anywhereã€==ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°==ã€ä¸€æ¬¡é•œåƒï¼Œå¤„å¤„è¿è¡Œã€==ã€‚


![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082005.png)


> Linuxå®¹å™¨æŠ€æœ¯çš„å‡ºç°å°±è§£å†³äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œè€Œ Docker å°±æ˜¯åœ¨å®ƒçš„åŸºç¡€ä¸Šå‘å±•è¿‡æ¥çš„ã€‚å°†åº”ç”¨æ‰“æˆé•œåƒï¼Œé€šè¿‡é•œåƒæˆä¸ºè¿è¡Œåœ¨Dockerå®¹å™¨ä¸Šé¢çš„å®ä¾‹ï¼Œè€Œ Dockerå®¹å™¨åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šéƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™å°±å®ç°äº†==è·¨å¹³å°ã€è·¨æœåŠ¡å™¨==ã€‚åªéœ€è¦ä¸€æ¬¡é…ç½®å¥½ç¯å¢ƒï¼Œæ¢åˆ°åˆ«çš„æœºå­ä¸Šå°±å¯ä»¥ä¸€é”®éƒ¨ç½²å¥½ï¼Œå¤§å¤§ç®€åŒ–äº†æ“ä½œï¼Œä»è€Œè§£å†³äº†è¿è¡Œç¯å¢ƒå’Œé…ç½®é—®é¢˜çš„è½¯ä»¶å®¹å™¨ï¼Œ æ–¹ä¾¿åšæŒç»­é›†æˆå¹¶æœ‰åŠ©äºæ•´ä½“å‘å¸ƒçš„å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚

### 1.1.3 Docker å®¹å™¨ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºçš„åŒºåˆ«

> Docker å®¹å™¨å‘å±•å†ç¨‹ï¼š

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082059.png)

> Docker å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ï¼š
>
> ç”±äºè™šæ‹Ÿæœºå­˜åœ¨æŸäº›ç¼ºç‚¹ï¼ŒLinuxå‘å±•å‡ºäº†å¦ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼š`Linuxå®¹å™¨(Linux Containersï¼Œç¼©å†™ä¸º LXC)`

 - Linuxå®¹å™¨æ˜¯ä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†éš”ç¦»å¼€çš„ä¸€ç³»åˆ—è¿›ç¨‹ï¼Œä»å¦ä¸€ä¸ªé•œåƒè¿è¡Œï¼Œå¹¶ç”±è¯¥é•œåƒæä¾›æ”¯æŒè¿›ç¨‹æ‰€éœ€çš„å…¨éƒ¨æ–‡ä»¶ã€‚
- å®¹å™¨æä¾›çš„é•œåƒåŒ…å«äº†åº”ç”¨çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå› è€Œåœ¨ä»å¼€å‘åˆ°æµ‹è¯•å†åˆ°ç”Ÿäº§çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒéƒ½å…·æœ‰å¯ç§»æ¤æ€§å’Œä¸€è‡´æ€§ã€‚

 æœ‰äº†å®¹å™¨ï¼Œå°±å¯ä»¥å°†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰èµ„æºæ‰“åŒ…åˆ°ä¸€ä¸ªéš”ç¦»çš„å®¹å™¨ä¸­ã€‚==å®¹å™¨ä¸è™šæ‹Ÿæœºä¸åŒï¼Œä¸éœ€è¦æ†ç»‘ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼Œåªéœ€è¦è½¯ä»¶å·¥ä½œæ‰€éœ€çš„åº“èµ„æºå’Œè®¾ç½®==ã€‚ç³»ç»Ÿå› æ­¤è€Œå˜å¾—é«˜æ•ˆè½»é‡å¹¶ä¿è¯éƒ¨ç½²åœ¨ä»»ä½•ç¯å¢ƒä¸­çš„è½¯ä»¶éƒ½èƒ½å§‹ç»ˆå¦‚ä¸€åœ°è¿è¡Œã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082221.png)

 `è™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰`å°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚
 
 å®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windows10ç³»ç»Ÿé‡Œé¢è¿è¡ŒLinuxç³»ç»ŸCentOS7ã€‚åº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ï¼Œå› ä¸ºè™šæ‹Ÿæœºçœ‹ä¸Šå»è·ŸçœŸå®ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºåº•å±‚ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å…¶ä»–éƒ¨åˆ†æ¯«æ— å½±å“ã€‚è¿™ç±»è™šæ‹Ÿæœºå®Œç¾çš„è¿è¡Œäº†å¦ä¸€å¥—ç³»ç»Ÿï¼Œèƒ½å¤Ÿä½¿==åº”ç”¨ç¨‹åºï¼Œæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ä¸‰è€…ä¹‹é—´çš„é€»è¾‘ä¸å˜==ã€‚
 
![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082312.png)

* ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€åº”ç”¨è¿›ç¨‹ï¼›
* å®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ç›´æ¥è¿è¡Œäºå®¿ä¸»çš„å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ä¸”ä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿã€‚å› æ­¤å®¹å™¨è¦æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ã€‚
* æ¯ä¸ªå®¹å™¨ä¹‹é—´äº’ç›¸éš”ç¦»ï¼Œæ¯ä¸ªå®¹å™¨æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿ ï¼Œå®¹å™¨ä¹‹é—´è¿›ç¨‹ä¸ä¼šç›¸äº’å½±å“ï¼Œèƒ½åŒºåˆ†è®¡ç®—èµ„æºã€‚

## 1.2 Docker èƒ½å¹²å—

> Dcoker å¯ä»¥åŠ å¿«æ„å»ºã€å…±äº«å’Œè¿è¡Œç°ä»£åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚


![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082401.png)


> ==Docker å¯ä»¥ä½¿å¾—å¼€å‘å˜å¾—é«˜æ•ˆä¸”å¯é¢„æµ‹==
>
> Docker æ¶ˆé™¤äº†é‡å¤ã€å¹³å‡¡çš„é…ç½®ä»»åŠ¡ï¼Œå¹¶åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­ç”¨äºå¿«é€Ÿã€è½»æ¾å’Œå¯ç§»æ¤çš„åº”ç”¨ç¨‹åºå¼€å‘â€”â€”æ¡Œé¢å’Œäº‘ã€‚ Docker å…¨é¢çš„ç«¯åˆ°ç«¯å¹³å°åŒ…æ‹¬ UIã€CLIã€API å’Œå®‰å…¨æ€§ï¼Œå®ƒä»¬è¢«è®¾è®¡ä¸ºåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºäº¤ä»˜ç”Ÿå‘½å‘¨æœŸä¸­ååŒå·¥ä½œã€‚


![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082439.png)


### 1.2.1 Build

> - é€šè¿‡åˆ©ç”¨ Docker æ˜ åƒåœ¨ Windows å’Œ Mac ä¸Šé«˜æ•ˆå¼€å‘æ‚¨è‡ªå·±ç‹¬ç‰¹çš„åº”ç”¨ç¨‹åºï¼ŒæŠ¢å…ˆå¼€å§‹ç¼–ç ã€‚ ä½¿ç”¨ Docker Compose åˆ›å»ºæ‚¨çš„å¤šå®¹å™¨åº”ç”¨ç¨‹åºã€‚
> - åœ¨æ•´ä¸ªå¼€å‘ç®¡é“ä¸­ä¸æ‚¨æœ€å–œæ¬¢çš„å·¥å…·é›†æˆâ€”â€”Docker å¯ä¸æ‚¨ä½¿ç”¨çš„æ‰€æœ‰å¼€å‘å·¥å…·é…åˆä½¿ç”¨ï¼ŒåŒ…æ‹¬ VS Codeã€CircleCI å’Œ GitHubã€‚
> - å°†åº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºå¯ç§»æ¤å®¹å™¨æ˜ åƒï¼Œä»¥ä¾¿åœ¨ä»æœ¬åœ° Kubernetes åˆ° AWS ECSã€Azure ACIã€Google GKE ç­‰çš„ä»»ä½•ç¯å¢ƒä¸­ä¸€è‡´åœ°è¿è¡Œã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082502.png)


### 1.2.2 Share

> - åˆ©ç”¨ Docker å¯ä¿¡å†…å®¹ï¼ŒåŒ…æ‹¬ Docker å®˜æ–¹å›¾åƒå’Œæ¥è‡ª Docker Hub å­˜å‚¨åº“çš„ Docker éªŒè¯å‘å¸ƒè€…çš„å›¾åƒã€‚
> - é€šè¿‡ä¸å›¢é˜Ÿæˆå‘˜å’Œå…¶ä»–å¼€å‘äººå‘˜åä½œä»¥åŠé€šè¿‡è½»æ¾å°†å›¾åƒå‘å¸ƒåˆ° Docker Hub æ¥è¿›è¡Œåˆ›æ–°ã€‚
> - ä½¿ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ä¸ªæ€§åŒ–å¼€å‘äººå‘˜å¯¹å›¾åƒçš„è®¿é—®ï¼Œå¹¶ä½¿ç”¨ Docker Hub å®¡è®¡æ—¥å¿—æ·±å…¥äº†è§£æ´»åŠ¨å†å²è®°å½•ã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082515.png)

### 1.2.3 Run

> - è½»æ¾äº¤ä»˜å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶è®©å®ƒä»¬åœ¨æ‚¨çš„æ‰€æœ‰ç¯å¢ƒä¸­ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œï¼ŒåŒ…æ‹¬è®¾è®¡ã€æµ‹è¯•ã€æš‚å­˜å’Œç”Ÿäº§â€”â€”æ¡Œé¢æˆ–äº‘åŸç”Ÿã€‚
> - å°†æ‚¨çš„åº”ç”¨ç¨‹åºä»¥ä¸åŒçš„è¯­è¨€ç‹¬ç«‹éƒ¨ç½²åœ¨å•ç‹¬çš„å®¹å™¨ä¸­ã€‚ é™ä½è¯­è¨€ã€åº“æˆ–æ¡†æ¶ä¹‹é—´å‘ç”Ÿå†²çªçš„é£é™©ã€‚
> - å€ŸåŠ© Docker Compose CLI çš„ç®€å•æ€§å’Œä¸€æ¡å‘½ä»¤åŠ é€Ÿå¼€å‘ï¼Œåœ¨æœ¬åœ°å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨ AWS ECS å’Œ Azure ACI åœ¨äº‘ä¸Šå¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºã€‚


![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082529.png)


### 1.2.4 æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´

> åº”ç”¨å®¹å™¨åŒ–è¿è¡Œåï¼Œç”Ÿäº§ç¯å¢ƒè¿è¡Œçš„åº”ç”¨å¯ä¸å¼€å‘ã€æµ‹è¯•ç¯å¢ƒçš„åº”ç”¨é«˜åº¦ä¸€è‡´ï¼Œå®¹å™¨ä¼šå°†åº”ç”¨ç¨‹åºç›¸å…³çš„ç¯å¢ƒå’ŒçŠ¶æ€å®Œå…¨å°è£…èµ·æ¥ï¼Œä¸ä¼šå› ä¸ºåº•å±‚åŸºç¡€æ¶æ„å’Œæ“ä½œç³»ç»Ÿçš„ä¸ä¸€è‡´æ€§ç»™åº”ç”¨å¸¦æ¥å½±å“ï¼Œäº§ç”Ÿæ–°çš„BUGã€‚å½“å‡ºç°ç¨‹åºå¼‚å¸¸æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æµ‹è¯•ç¯å¢ƒçš„ç›¸åŒå®¹å™¨è¿›è¡Œå¿«é€Ÿå®šä½å’Œä¿®å¤ã€‚

### 1.2.5 æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨

> ==Dockeræ˜¯å†…æ ¸çº§è™šæ‹ŸåŒ–==ï¼Œå…¶ä¸åƒä¼ ç»Ÿçš„è™šæ‹ŸåŒ–æŠ€æœ¯ä¸€æ ·éœ€è¦é¢å¤–çš„Hypervisoræ”¯æŒï¼Œæ‰€ä»¥åœ¨ä¸€å°ç‰©ç†æœºä¸Šå¯ä»¥è¿è¡Œå¾ˆå¤šä¸ªå®¹å™¨å®ä¾‹ï¼Œå¯å¤§å¤§æå‡ç‰©ç†æœåŠ¡å™¨çš„CPUå’Œå†…å­˜çš„åˆ©ç”¨ç‡ã€‚

## 1.3 Docker çš„åŸºæœ¬ç»„æˆ

> Docker æ˜¯ä¸€ä¸ª Client-Server ç»“æ„çš„ç³»ç»Ÿï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œ ç„¶åé€šè¿‡Socket è¿æ¥ä»å®¢æˆ·ç«¯è®¿é—®ï¼Œå®ˆæŠ¤è¿›ç¨‹ä»å®¢æˆ·ç«¯æ¥å—å‘½ä»¤å¹¶ç®¡ç†è¿è¡Œåœ¨ä¸»æœºä¸Šçš„å®¹å™¨ã€‚

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082609.png)

## 1.4 Docker ç›¸å…³æ¦‚å¿µ

Docker å¸¸è§çš„æ¦‚å¿µæœ‰ï¼š

 - é•œåƒï¼ˆImageï¼‰
 - å®¹å™¨ï¼ˆContainerï¼‰
 - é•œåƒæ–‡ä»¶
 - å®¹å™¨å®ä¾‹
 - ä»“åº“

> Docker é•œåƒï¼ˆImageï¼‰å°±æ˜¯ä¸€ä¸ª**åªè¯»**çš„æ¨¡æ¿ã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»º Docker å®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚
>
> å®ƒä¹Ÿç›¸å½“äºæ˜¯ä¸€ä¸ªrootæ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ centos:7 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— centos:7 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚
>
> ç›¸å½“äºå®¹å™¨çš„â€œæºä»£ç â€ï¼Œdocker é•œåƒæ–‡ä»¶ç±»ä¼¼äº Java çš„ç±»æ¨¡æ¿ï¼Œè€Œ docker å®¹å™¨å®ä¾‹ç±»ä¼¼äºjava ä¸­ new å‡ºæ¥çš„å®ä¾‹å¯¹è±¡ã€‚

| Docker | é¢å‘å¯¹è±¡ |
| ----- | -------- |
|     é•œåƒ  | ç±»         |
|     å®¹å™¨  | å¯¹è±¡         |

> Docker åˆ©ç”¨å®¹å™¨ï¼ˆContainerï¼‰ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡è¿è¡Œåœ¨å®¹å™¨é‡Œé¢ï¼Œå®¹å™¨å°±ç±»ä¼¼äºä¸€ä¸ªè™šæ‹ŸåŒ–çš„è¿è¡Œç¯å¢ƒï¼Œå®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚å°±åƒæ˜¯Javaä¸­çš„ç±»å’Œå®ä¾‹å¯¹è±¡ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨ä¸ºé•œåƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„å’Œéš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œå®ƒå¯ä»¥è¢«å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€ä¿è¯å®‰å…¨çš„å¹³å°ã€‚å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„Linuxç¯å¢ƒï¼ˆåŒ…æ‹¬rootç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰å’Œè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºã€‚

 ä»“åº“ï¼ˆRepositoryï¼‰æ˜¯é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚ç±»ä¼¼äºï¼š
 
 - Mavenä»“åº“ï¼Œå­˜æ”¾å„ç§jaråŒ…çš„åœ°æ–¹
 - githubä»“åº“ï¼Œå­˜æ”¾å„ç§gité¡¹ç›®çš„åœ°æ–¹

> Dockerå…¬å¸æä¾›çš„å®˜æ–¹registryè¢«ç§°ä¸ºDocker Hubï¼Œå­˜æ”¾å„ç§é•œåƒæ¨¡æ¿çš„åœ°æ–¹ã€‚
>

 ä»“åº“åˆ†ä¸ºï¼š
 
- å…¬å¼€ä»“åº“ï¼ˆPublicï¼‰
- ç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰

> æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ [DockerHub](https://hub.docker.com/)ï¼Œå­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒä¾›ç”¨æˆ·ä¸‹è½½ã€‚å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬é˜¿é‡Œäº‘ ã€ç½‘æ˜“äº‘ç­‰

 - Docker æœ¬èº«æ˜¯ä¸€ä¸ªå®¹å™¨è¿è¡Œè½½ä½“æˆ–ç§°ä¹‹ä¸ºç®¡ç†å¼•æ“ã€‚æˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯ image é•œåƒæ–‡ä»¶ã€‚åªæœ‰é€šè¿‡è¿™ä¸ªé•œåƒæ–‡ä»¶æ‰èƒ½ç”Ÿæˆ Docker å®¹å™¨å®ä¾‹(ç±»ä¼¼ Java ä¸­ new å‡ºæ¥ä¸€ä¸ªå¯¹è±¡)ã€‚
- image æ–‡ä»¶å¯ä»¥çœ‹ä½œæ˜¯å®¹å™¨çš„æ¨¡æ¿ã€‚Docker æ ¹æ® image æ–‡ä»¶ç”Ÿæˆå®¹å™¨çš„å®ä¾‹ã€‚åŒä¸€ä¸ª image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚
 - é•œåƒæ–‡ä»¶: image æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºé•œåƒæ–‡ä»¶ã€‚
 - å®¹å™¨å®ä¾‹ï¼šä¸€ä¸ªå®¹å™¨è¿è¡Œä¸€ç§æœåŠ¡ï¼Œå½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡ docker å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„è¿è¡Œå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å®¹å™¨ä»“åº“

## 1.5 Hello Docker

> å½“æˆ‘ä»¬æ‰§è¡Œ  `docker run hello-world` æ—¶ï¼š

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416082956.png)

> Docker åŸºæœ¬æµç¨‹


![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416083008.png)




# äºŒã€åœ¨ CentOS7  ä¸­å®‰è£… docker

## 2.1 å‰ç½®ç¯å¢ƒçš„å®‰è£…

> ä½¿ç”¨ `cat /etc/redhat-release` æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…æ ¸æ˜¯å¦æ»¡è¶³æ¡ä»¶
>
> ç›®å‰ï¼ŒCentOS ä»…å‘è¡Œç‰ˆæœ¬ä¸­çš„å†…æ ¸æ”¯æŒ Dockerã€‚Docker è¿è¡Œåœ¨CentOS 7 (64-bit)ä¸Šï¼Œ
>
> è¦æ±‚ç³»ç»Ÿä¸º64ä½ã€Linuxç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸º 3.8ä»¥ä¸Šï¼Œè¿™é‡Œé€‰ç”¨Centos7.x

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085202.png)

1. å®‰è£… `sudo yum install -y yum-utils`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085210.png)

2. å®‰è£… `yum -y install gcc`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085219.png)

3. å®‰è£… `yum -y install gcc-c++`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085229.png)

## 2.2 è®¾ç½®stableé•œåƒä»“åº“

```shell
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085251.png)


1. åˆ·æ–° `yum makecache fast`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085311.png)

## 2.3 å®‰è£… docker CE

1. å®‰è£… `yum -y install docker-ce docker-ce-cli containerd.io`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085319.png)

## 2.4 éªŒè¯ docker

1. å¯åŠ¨ `systemctl start docker`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085335.png)

2. æ­¤å¤„æˆ‘ä»¬å¯ä»¥å°† docker è®¾ç½®ä¸ºå¼€æœºè‡ªå¯ `systemctl enable docker`

3. æµ‹è¯• `docker version`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085354.png)

4. HelloDocker `docker run hello-world`

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085406.png)

## 2.5 é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ

> é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ [å®¹å™¨é•œåƒæœåŠ¡ (aliyun.com)](https://cr.console.aliyun.com/cn-shanghai/instances/mirrors)

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085419.png)

1. å›é€€ `cd ~`

2. æ‰§è¡Œè„šæœ¬ ==æ­¤å¤„éœ€è¦ç”³è¯·è‡ªå·±çš„åŠ é€Ÿåœ°å€==

```shell
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["xxx"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

![](https://cola-picgo-1311841992.cos.ap-beijing.myqcloud.com/20230416085440.png)